version: null
meta:
  environment: node
  toolchain:
    name: npm
    version: "20"
build:
  skip: false
  # Сборка проекта (оставляем как было, она работает)
  additionalCommands: npm install && CI=false npm run build
run:
  persistenceMount: /data
  # ВАЖНОЕ ИЗМЕНЕНИЕ 1:
  # Мы не используем scriptName. Мы пишем команду запуска напрямую.
  # -s build: раздавать папку build
  # -l 3000: слушать порт 3000 (это безопаснее, чем 80)
  command: npx serve -s build -l 3000
  
  # ВАЖНОЕ ИЗМЕНЕНИЕ 2:
  # Говорим Амвере, что внутри контейнера сайт работает на 3000 порту.
  # Амвера сама перенаправит на него внешний трафик.
  containerPort: 3000
serviceType: compute
